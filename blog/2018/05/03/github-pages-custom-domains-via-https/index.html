<html>
<head>

    <title>Above, Below, and Beyond Tech Talk</title>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon" />

    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/tomorrow-night-bright.css" />

    <link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" />

    <link href="/css/style.css" rel="stylesheet" />
</head>
<body>
<div class="container header">
    <div class="jumbotron">
        <h1>Above, Below, and Beyond Tech Talk</h1>
        <p>by Rahel Lüthy</p>
    </div>
    <nav class="navbar navbar-default">
        <div>
            <ul class="nav navbar-nav">
                <li><a href="/">Blog</a></li>
                <li><a href="/archive.html">Archive</a></li>
                <li><a href="/about.html">About</a></li>
            </ul>
        </div>
    </nav>
</div>
<div class="container content">
    <div class="info">
    May  3, 2018 
</div>
<h1>GitHub Pages Custom Domains Via HTTPS</h1>
<p>Two days ago, GitHub <a href="https://blog.github.com/2018-05-01-github-pages-custom-domains-https/">announced</a> the support of HTTPS for custom domains. In addition to this blog, I maintain a few websites for <a href="https://physiomovimento.ch/">friends</a> and <a href="https://psychotherapie-bieri.ch/">family</a>, all configured through <code>A</code> records – time for migration!</p>
<p>Officially, the migration is a simple matter of toggling the “Enforce HTTPS” button, but the button was disabled for all of my sites. The explanation wasn’t particularly encouraging: <em>Unavailable for your site because your domain is not properly configured to support HTTPS</em>.</p>
<p>Well, time for RTFM (not my favorite hobby).</p>
<p>These are the steps that finally worked for me:</p>
<h2 id="https-migration-steps">HTTPS Migration Steps</h2>
<h3 id="step-0-mixed-content-prevention">Step 0: Mixed Content Prevention</h3>
<p>First things first: Prepare your site’s content. Ensure that all your assets (links to CSS, JS, etc.) are loaded via HTTPS. Otherwise browsers might block your “Mixed Content”.</p>
<h3 id="step-1-dns-a-record-migration">Step 1: DNS A-Record Migration</h3>
<p>On your provider’s website, change all <code>A</code> records to point to the following four new IPs:<br />
 </p>
<p><del><code>192.30.252.153</code></del></p>
<p><del><code>192.30.252.154</code></del></p>
<p><code>185.199.108.153</code></p>
<p><code>185.199.109.153</code></p>
<p><code>185.199.110.153</code></p>
<p><code>185.199.111.153</code><br />
 </p>
<p>This change might take a few hours to become effective (depending on the TTL). Use <code>dig</code> to check whether the new DNS configuration is ready:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">dig</span> netzwerg.ch +noall +answer</a></code></pre></div>
<p>It should look like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">; <span class="op">&lt;&lt;&gt;&gt;</span> <span class="ex">DiG</span> 9.10.6 <span class="op">&lt;&lt;&gt;&gt;</span> netzwerg.ch +noall +answer</a>
<a class="sourceLine" id="cb2-2" title="2">;; <span class="ex">global</span> options: +cmd</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="ex">netzwerg.ch.</span>		10800	IN	A	185.199.110.153</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="ex">netzwerg.ch.</span>		10800	IN	A	185.199.111.153</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="ex">netzwerg.ch.</span>		10800	IN	A	185.199.108.153</a>
<a class="sourceLine" id="cb2-6" title="6"><span class="ex">netzwerg.ch.</span>		10800	IN	A	185.199.109.153</a></code></pre></div>
<h3 id="step-2-trigger-certificate-generation">Step 2: Trigger Certificate Generation</h3>
<p>In order for GitHub to detect that your site is now ready for migration, you apparently need to trigger a detection script. Any change to your repository’s <code>CNAME</code> file will do, so e.g. make a minor change and revert it, or make a harmless whitespace edit. As a result, GitHub will now generate the certificates necessary for HTTPS.</p>
<h3 id="step-3-wait-for-certificate-availability">Step 3: Wait For Certificate Availability</h3>
<p>Now the “Enforce HTTPS” button will still be disabled, but the explanation will be much more encouraging: <em>Not yet available for your site because the certificate has not finished being issued</em>. More patience required, we’re getting there…</p>
<h3 id="step-4-enforce-https">Step 4: Enforce HTTPS</h3>
<p>It might take a few hours, but as soon as this message is gone, you can access your site via HTTPS. Check that everything still works (particularly your new HTTPS asset links). Once you’re happy, toggle the “Enforce HTTPS” switch – Voilà!</p>

</div>
<div class="container footer">
    <p>Written by Rahel Lüthy &mdash; Generated by <a href="https://jaspervdj.be/hakyll">Hakyll</a></p>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>