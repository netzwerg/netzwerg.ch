<html>
<head>

    <title>Above, Below, and Beyond Tech Talk</title>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon" />

    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/tomorrow-night-bright.css" />

    <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" />
    <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" />

    <link href="/css/style.css" rel="stylesheet" />
</head>
<body>
<div class="container header">
    <div class="jumbotron">
        <h1>Above, Below, and Beyond Tech Talk</h1>
        <p>by Rahel Lüthy</p>
    </div>
    <nav class="navbar navbar-default">
        <div>
            <ul class="nav navbar-nav">
                <li><a href="/">Blog</a></li>
                <li><a href="/archive.html">Archive</a></li>
                <li><a href="/about.html">About</a></li>
            </ul>
        </div>
    </nav>
</div>
<div class="container content">
    <div class="info">
    June 20, 2007
</div>
<h1>Threads and Swing</h1>
<p>Anyone who has done some serious Swing development has (hopefully) heard about the “single thread rule”:</p>
<blockquote>
Once a Swing component has been realized, all code that might affect or depend on the state of that component should be executed in the event-dispatching thread.
</p>
</blockquote>
<p>The rule is well explained in the classical <a href="http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html">threads and swing</a> article.</p>
<p><code>SwingUtilities.invokeLater()</code> is your friend, so this rule is not particularly difficult to follow. However, until a few minutes (read: <a href="http://weblogs.java.net/blog/cayhorstmann/archive/2007/06/the_single_thre.html">some</a> <a href="http://bitguru.wordpress.com/2007/03/21/will-the-real-swing-single-threading-rule-please-stand-up/">posts</a>) ago, i wasn’t aware that the rule has changed in 2004:</p>
<blockquote>
<p>To avoid the possibility of deadlock, you must take extreme care that Swing components and models are created, modified, and queried only from the event-dispatching thread.</p>
</blockquote>
<p>It is the subtle difference between <em>realized</em> (<code>setVisible(true)</code>, <code>show()</code>, or <code>pack()</code> has been called) and <em>created</em>. While it was totally fine to launch your UI like this:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span>(String[] args) {
  JFrame frame = <span class="kw">new</span> JFrame(<span class="st">&quot;HelloWorldSwing&quot;</span>);
  frame.<span class="fu">setDefaultCloseOperation</span>(JFrame.<span class="fu">EXIT_ON_CLOSE</span>);
  JLabel label = <span class="kw">new</span> JLabel(<span class="st">&quot;Hello World&quot;</span>);
  frame.<span class="fu">getContentPane</span>().<span class="fu">add</span>(label);
  frame.<span class="fu">pack</span>();
  frame.<span class="fu">setVisible</span>(<span class="kw">true</span>);
}</code></pre></div>
<p>you are now required to create and show all swing components in the EDT (from the <a href="http://java.sun.com/docs/books/tutorial/uiswing/examples/start/HelloWorldSwingProject/src/start/HelloWorldSwing.java">official sun swing tutorial</a>):</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> HelloWorldSwing {

  <span class="kw">private</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">createAndShowGUI</span>() {
    <span class="co">//Create and set up the window.</span>
    JFrame frame = <span class="kw">new</span> JFrame(<span class="st">&quot;HelloWorldSwing&quot;</span>);
    frame.<span class="fu">setDefaultCloseOperation</span>(JFrame.<span class="fu">EXIT_ON_CLOSE</span>);

    <span class="co">//Add the ubiquitous &quot;Hello World&quot; label.</span>
    JLabel label = <span class="kw">new</span> JLabel(<span class="st">&quot;Hello World&quot;</span>);
    frame.<span class="fu">getContentPane</span>().<span class="fu">add</span>(label);

    <span class="co">//Display the window.</span>
    frame.<span class="fu">pack</span>();
    frame.<span class="fu">setVisible</span>(<span class="kw">true</span>);
  }

  <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span>(String[] args) {
    <span class="co">//Schedule a job for the event-dispatching thread:</span>
    <span class="co">//creating and showing this application's GUI.</span>
    javax.<span class="fu">swing</span>.<span class="fu">SwingUtilities</span>.<span class="fu">invokeLater</span>(<span class="kw">new</span> Runnable() {
        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">run</span>() {
          <span class="fu">createAndShowGUI</span>();
        }
    });
  }
}</code></pre></div>
<p>I am a bit puzzled — can the real swing experts please stand up?</p>

</div>
<div class="container footer">
    <p>Written by Rahel Lüthy &mdash; Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a></p>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-708448-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>