<html>
<head>

    <title>Above, Below, and Beyond Tech Talk</title>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="/favicon.png" rel="icon" />

    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/tomorrow-night-bright.css" />

    <link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" />

    <link href="/css/style.css" rel="stylesheet" />
</head>
<body>
<div class="container header">
    <div class="jumbotron">
        <h1>Above, Below, and Beyond Tech Talk</h1>
        <p>by Rahel Lüthy</p>
    </div>
    <nav class="navbar navbar-default">
        <div>
            <ul class="nav navbar-nav">
                <li><a href="/">Blog</a></li>
                <li><a href="/archive.html">Archive</a></li>
                <li><a href="/about.html">About</a></li>
            </ul>
        </div>
    </nav>
</div>
<div class="container content">
    <div class="info">
    June 20, 2007
</div>
<h1>Threads and Swing</h1>
<p>Anyone who has done some serious Swing development has (hopefully) heard about the “single thread rule”:</p>
<blockquote>
Once a Swing component has been realized, all code that might affect or depend on the state of that component should be executed in the event-dispatching thread.
</p>
</blockquote>
<p>The rule is well explained in the classical <a href="http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html">threads and swing</a> article.</p>
<p><code>SwingUtilities.invokeLater()</code> is your friend, so this rule is not particularly difficult to follow. However, until a few minutes (read: <a href="http://weblogs.java.net/blog/cayhorstmann/archive/2007/06/the_single_thre.html">some</a> <a href="http://bitguru.wordpress.com/2007/03/21/will-the-real-swing-single-threading-rule-please-stand-up/">posts</a>) ago, i wasn’t aware that the rule has changed in 2004:</p>
<blockquote>
<p>To avoid the possibility of deadlock, you must take extreme care that Swing components and models are created, modified, and queried only from the event-dispatching thread.</p>
</blockquote>
<p>It is the subtle difference between <em>realized</em> (<code>setVisible(true)</code>, <code>show()</code>, or <code>pack()</code> has been called) and <em>created</em>. While it was totally fine to launch your UI like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span>(<span class="bu">String</span>[] args) {</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="bu">JFrame</span> frame = <span class="kw">new</span> <span class="bu">JFrame</span>(<span class="st">&quot;HelloWorldSwing&quot;</span>);</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  frame.<span class="fu">setDefaultCloseOperation</span>(<span class="bu">JFrame</span>.<span class="fu">EXIT_ON_CLOSE</span>);</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="bu">JLabel</span> label = <span class="kw">new</span> <span class="bu">JLabel</span>(<span class="st">&quot;Hello World&quot;</span>);</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  frame.<span class="fu">getContentPane</span>().<span class="fu">add</span>(label);</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  frame.<span class="fu">pack</span>();</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  frame.<span class="fu">setVisible</span>(<span class="kw">true</span>);</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">}</a></code></pre></div>
<p>you are now required to create and show all swing components in the EDT (from the <a href="http://java.sun.com/docs/books/tutorial/uiswing/examples/start/HelloWorldSwingProject/src/start/HelloWorldSwing.java">official sun swing tutorial</a>):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">public</span> <span class="kw">class</span> HelloWorldSwing {</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="kw">private</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">createAndShowGUI</span>() {</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="co">//Create and set up the window.</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="bu">JFrame</span> frame = <span class="kw">new</span> <span class="bu">JFrame</span>(<span class="st">&quot;HelloWorldSwing&quot;</span>);</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    frame.<span class="fu">setDefaultCloseOperation</span>(<span class="bu">JFrame</span>.<span class="fu">EXIT_ON_CLOSE</span>);</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="co">//Add the ubiquitous &quot;Hello World&quot; label.</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="bu">JLabel</span> label = <span class="kw">new</span> <span class="bu">JLabel</span>(<span class="st">&quot;Hello World&quot;</span>);</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    frame.<span class="fu">getContentPane</span>().<span class="fu">add</span>(label);</a>
<a class="sourceLine" id="cb2-11" data-line-number="11"></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="co">//Display the window.</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    frame.<span class="fu">pack</span>();</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    frame.<span class="fu">setVisible</span>(<span class="kw">true</span>);</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb2-16" data-line-number="16"></a>
<a class="sourceLine" id="cb2-17" data-line-number="17">  <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span>(<span class="bu">String</span>[] args) {</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">    <span class="co">//Schedule a job for the event-dispatching thread:</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19">    <span class="co">//creating and showing this application's GUI.</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20">    javax.<span class="fu">swing</span>.<span class="fu">SwingUtilities</span>.<span class="fu">invokeLater</span>(<span class="kw">new</span> <span class="bu">Runnable</span>() {</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">run</span>() {</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">          <span class="fu">createAndShowGUI</span>();</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">        }</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">    });</a>
<a class="sourceLine" id="cb2-25" data-line-number="25">  }</a>
<a class="sourceLine" id="cb2-26" data-line-number="26">}</a></code></pre></div>
<p>I am a bit puzzled — can the real swing experts please stand up?</p>

</div>
<div class="container footer">
    <p>Written by Rahel Lüthy &mdash; Generated by <a href="https://jaspervdj.be/hakyll">Hakyll</a></p>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>